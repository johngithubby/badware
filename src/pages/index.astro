---
import BaseHead from "../components/BaseHead.astro";
import { SITE_DESCRIPTION, SITE_TITLE } from "../consts";
// We redirect root (/badware/) to the blog listing (/badware/blog/) for a simpler entrypoint.
const rawBase = import.meta.env.BASE_URL || "/";
// Normalize base to have exactly one leading and one trailing slash
const base = ("/" + rawBase.replace(/^\/+|\/+$|/g, "") + "/").replace(
	/\/+/g,
	"/",
);
function joinBase(b: string, path: string) {
	if (!path) return b;
	return (b.endsWith("/") ? b : b + "/") + path.replace(/^\//, "");
}
const target = joinBase(base, "blog/");
---

<!doctype html>
<html lang="en">
	<head>
		<BaseHead title={SITE_TITLE} description={SITE_DESCRIPTION} />
		<!-- Immediate redirect to blog listing using meta refresh (works without JS) -->
		<meta http-equiv="refresh" content={`0; url=${target}`} />
	</head>
	<body>
		<main>
			<h1>Redirectingâ€¦</h1>
			<p>
				If you're not automatically redirected, <a href={target}
					>continue to the blog</a
				>.
			</p>
		</main>
	</body>
</html>
